## الفرق بين AND و OR و NOT في SQL

في SQL، لما بنكتب شرط في استعلام `WHERE`، ساعات بنحتاج نستخدم أكتر من شرط في نفس الجملة. هنا بييجي دور **AND** و **OR** و **NOT** علشان نتحكم في منطق الفلترة.

---

### المطلوب :
عايزين نعرض المرضى اللي:
- عندهم ضغط دم عالي **و** سكر.
- أو نعرض اللي عندهم واحد فيهم بس.
- أو نستبعد اللي عندهم سكر.

---

# **شرح العوامل المنطقية في SQL: AND, OR, NOT**

## **1. العامل AND (و)**
يستخدم لدمج شرطين أو أكثر، ويجب أن تتحقق جميع الشروط حتى يظهر الصف في النتائج.

### **بناء الجملة:**
```
SELECT * FROM table_name 
WHERE condition1 AND condition2 AND condition3 ...;
```

### **مثال عملي:**
```sql
-- المرضى الذكور من القاهرة
SELECT * FROM patients
WHERE gender = 'ذكر' AND address LIKE '%القاهرة%';
```

### **النتيجة:**
سيظهر فقط المرضى الذكور الذين يعيشون في القاهرة.

---

## **2. العامل OR (أو)**
يستخدم عندما نريد أن يظهر الصف إذا تحقق أي من الشروط المذكورة (واحد على الأقل).

### **بناء الجملة:**
```sql
SELECT * FROM table_name 
WHERE condition1 OR condition2 OR condition3 ...;
```

### **مثال عملي:**
```sql
-- المرضى الذين يعيشون في القاهرة أو الجيزة
SELECT * FROM patients
WHERE address LIKE '%القاهرة%' OR address LIKE '%الجيزة%';
```

### **النتيجة:**
سيظهر المرضى من القاهرة أو الجيزة أو كليهما.

---

## **3. العامل NOT (ليس)**
ينفي الشرط المذكور بعده، أي يظهر الصفوف التي لا تحقق الشرط.

### **بناء الجملة:**
```sql
SELECT * FROM table_name 
WHERE NOT condition;
```

### **مثال عملي:**
```sql
-- المرضى الذين ليسوا من القاهرة
SELECT * FROM patients
WHERE NOT address LIKE '%القاهرة%';
```

### **النتيجة:**
سيظهر جميع المرضى ما عدا الذين يعيشون في القاهرة.

---

## **4. استخدام العوامل معًا**
يمكن دمج العوامل المنطقية معًا لإنشاء شروط أكثر تعقيدًا.

### **مثال متكامل:**
```sql
-- المرضى الذكور من القاهرة أو الإناث من الجيزة
SELECT * FROM patients
WHERE (gender = 'ذكر' AND address LIKE '%القاهرة%')
   OR (gender = 'أنثى' AND address LIKE '%الجيزة%');
```

### **النتيجة:**
سيظهر:
- الذكور من القاهرة
- الإناث من الجيزة

---

## **5. ترتيب تنفيذ العمليات المنطقية**
SQL ينفذ العمليات المنطقية حسب الأولوية التالية:
1. الأقواس `()`
2. NOT
3. AND
4. OR

### **مثال يوضح أهمية الأقواس:**
```sql
-- بدون أقواس (سيتم تفسيره بشكل مختلف)
SELECT * FROM patients
WHERE gender = 'ذكر' AND address LIKE '%القاهرة%' OR age > 50;

-- مع أقواس (للتحكم في الترتيب)
SELECT * FROM patients
WHERE gender = 'ذكر' AND (address LIKE '%القاهرة%' OR age > 50);
```

---

## **6. أمثلة إضافية على البيانات المقدمة**

### **أ. المرضى الذين يعانون من ارتفاع ضغط الدم وعمرهم فوق 40 سنة**
```sql
SELECT p.name, p.dob, d.diagnosis
FROM patients p
JOIN diagnoses d ON p.id = d.patient_id
WHERE d.diagnosis = 'ارتفاع ضغط الدم' 
  AND (YEAR(CURRENT_DATE) - YEAR(p.dob) > 40;
```

### **ب. الأدوية التي تنتهي بعد تاريخ معين أو ليس لها تاريخ انتهاء**
```sql
SELECT * FROM medications
WHERE end_date > '2024-05-01' OR end_date IS NULL;
```

### **ج. الأطباء المتخصصون في الباطنة وليسوا دكتور شريف**
```sql
SELECT * FROM doctors
WHERE specialty = 'باطنة' AND NOT name = 'شريف أنور';
```

---

## **ملخص استخدام العوامل المنطقية**

| العامل | الوصف | مثال |
|--------|-------|-------|
| **AND** | جميع الشروط يجب أن تكون صحيحة | `WHERE condition1 AND condition2` |
| **OR** | يكفي أن يتحقق أحد الشروط | `WHERE condition1 OR condition2` |
| **NOT** | ينفي الشرط | `WHERE NOT condition` |

---

## **نصائح مهمة**
1. استخدم الأقواس `()` لتحديد أولوية التنفيذ عندما تدمج عدة عوامل
2. يمكنك استخدام أي عدد تريده من العوامل المنطقية في استعلام واحد
3. NOT يمكن استخدامه مع أي عامل آخر (مثل `NOT LIKE`، `NOT IN`)
4. استخدم المسافات البيضاء لجعل الاستعلامات أكثر قابلية للقراءة